# Traefik + Azure AD OAuth Configuration
# Copy this file to .env.traefik and fill in your values

# ═══════════════════════════════════════════════════
# REQUIRED: Hudu API Configuration
# ═══════════════════════════════════════════════════
HUDU_BASE_URL=https://hudu.247mgmt.com
HUDU_API_KEY=your-hudu-api-key-here
HUDU_TIMEOUT=30000

# ═══════════════════════════════════════════════════
# REQUIRED: Azure AD OAuth Configuration
# ═══════════════════════════════════════════════════
# Get these from Azure AD App Registration (see AZURE_AD_SETUP.md)
AZURE_TENANT_ID=7b80db37-11b2-4046-b65a-d1a4cf738372
AZURE_CLIENT_ID=your-azure-client-id-from-app-registration
AZURE_CLIENT_SECRET=your-azure-client-secret-from-app-registration

# Your Azure AD tenant domain (e.g., company.onmicrosoft.com)
AZURE_TENANT_DOMAIN=wheelhouseit.onmicrosoft.com

# Email domain(s) allowed to authenticate (comma-separated)
OAUTH2_EMAIL_DOMAINS=wheelhouseit.com,247mgmt.com

# ═══════════════════════════════════════════════════
# REQUIRED: OAuth2-Proxy Cookie Secret
# ═══════════════════════════════════════════════════
# Generate with: openssl rand -hex 16
# Or with: python3 -c 'import secrets; print(secrets.token_hex(16))'
OAUTH2_COOKIE_SECRET=

# ═══════════════════════════════════════════════════
# REQUIRED: Let's Encrypt / Cloudflare Configuration
# ═══════════════════════════════════════════════════
# Your email for Let's Encrypt notifications
LETSENCRYPT_EMAIL=admin@247mgmt.com

# Cloudflare API credentials for DNS-01 challenge
# Get from: https://dash.cloudflare.com/profile/api-tokens
# Token permissions: Zone:DNS:Edit for 247mgmt.com
CF_DNS_API_TOKEN=your-cloudflare-api-token-here

# Alternative: Use Global API Key (less secure, not recommended)
# CF_API_EMAIL=your-cloudflare-email
# CF_API_KEY=your-cloudflare-global-api-key

# ═══════════════════════════════════════════════════
# Server Configuration
# ═══════════════════════════════════════════════════
# Public hostname for the MCP server
MCP_HOSTNAME=mcp.hudu.247mgmt.com

# Server IP address (for internal DNS reference)
MCP_SERVER_IP=172.16.0.16

# MCP Server Port (internal, behind Traefik)
MCP_SERVER_PORT=3050

# Node environment
NODE_ENV=production

# Logging level
LOG_LEVEL=info

# ═══════════════════════════════════════════════════
# Optional: Advanced Configuration
# ═══════════════════════════════════════════════════
# OAuth2-Proxy session timeout (default: 168h = 7 days)
OAUTH2_COOKIE_EXPIRE=168h

# OAuth2-Proxy cookie refresh interval (default: 1h)
OAUTH2_COOKIE_REFRESH=1h

# Traefik dashboard (internal access only)
TRAEFIK_DASHBOARD_ENABLED=true
TRAEFIK_DASHBOARD_PORT=8080

# Let's Encrypt server (use staging for testing)
# ACME_SERVER=https://acme-staging-v02.api.letsencrypt.org/directory
ACME_SERVER=https://acme-v02.api.letsencrypt.org/directory

# ═══════════════════════════════════════════════════
# Optional: Azure AD Group Restrictions
# ═══════════════════════════════════════════════════
# Restrict access to users in specific Azure AD groups
# Comma-separated list of group Object IDs
# Get from: Azure AD → Groups → [Group] → Object ID
# OAUTH2_ALLOWED_GROUPS=

# ═══════════════════════════════════════════════════
# Optional: Security Headers
# ═══════════════════════════════════════════════════
# Enable HSTS (HTTP Strict Transport Security)
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000

# Content Security Policy
CSP_ENABLED=true
